/**
 * skylark-xspreadsheet - A version of xspreadsheet.js that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./align","./valign","./autofilter","./bold","./italic","./strike","./underline","./border","./clearformat","./paintformat","./text_color","./fill_color","./font_size","./font","./format","./formula","./freeze","./merge","./redo","./undo","./print","./textwrap","./more","../element","../../config","../event"],function(t,e,i,s,l,n,r,h,a,o,c,d,f,E,m,w,g,u,b,p,S,x,v,z,y,A){"use strict";function $(){return z.h("div",`${y.cssPrefix}-toolbar-divider`)}function k(){const{el:t,btns:e,moreEl:i,btns2:s}=this,{moreBtns:l,contentEl:n}=i.dd;t.css("width",`${this.widthFn()-60}px`);const r=t.box();let h=160,a=12;const o=[],c=[];s.forEach(([t,e],i)=>{h+=e,i===s.length-1||h<r.width?o.push(t):(a+=e,c.push(t))}),e.html("").children(...o),l.html("").children(...c),n.css("width",`${a}px`),c.length>0?i.show():i.hide()}return class{constructor(C,I,P=!1){this.data=C,this.change=(()=>{}),this.widthFn=I,this.isHide=P;const R=C.defaultStyle();this.items=[[this.undoEl=new p,this.redoEl=new b,new S,this.paintformatEl=new o,this.clearformatEl=new a],$(),[this.formatEl=new m],$(),[this.fontEl=new E,this.fontSizeEl=new f],$(),[this.boldEl=new s,this.italicEl=new l,this.underlineEl=new r,this.strikeEl=new n,this.textColorEl=new c(R.color)],$(),[this.fillColorEl=new d(R.bgcolor),this.borderEl=new h,this.mergeEl=new u],$(),[this.alignEl=new t(R.align),this.valignEl=new e(R.valign),this.textwrapEl=new x],$(),[this.freezeEl=new g,this.autofilterEl=new i,this.formulaEl=new w,this.moreEl=new v]],this.el=z.h("div",`${y.cssPrefix}-toolbar`),this.btns=z.h("div",`${y.cssPrefix}-toolbar-btns`),this.items.forEach(t=>{Array.isArray(t)?t.forEach(t=>{this.btns.child(t.el),t.change=((...t)=>{this.change(...t)})}):this.btns.child(t.el)}),this.el.child(this.btns),P?this.el.hide():(this.reset(),setTimeout(()=>{(function(){this.btns2=[],this.items.forEach(t=>{if(Array.isArray(t))t.forEach(({el:t})=>{const e=t.box(),{marginLeft:i,marginRight:s}=t.computedStyle();this.btns2.push([t,e.width+parseInt(i,10)+parseInt(s,10)])});else{const e=t.box(),{marginLeft:i,marginRight:s}=t.computedStyle();this.btns2.push([t,e.width+parseInt(i,10)+parseInt(s,10)])}})}).call(this),k.call(this)},0),A.bind(window,"resize",()=>{k.call(this)}))}paintformatActive(){return this.paintformatEl.active()}paintformatToggle(){this.paintformatEl.toggle()}trigger(t){this[`${t}El`].click()}resetData(t){this.data=t,this.reset()}reset(){if(this.isHide)return;const{data:t}=this,e=t.getSelectedCellStyle();this.undoEl.setState(!t.canUndo()),this.redoEl.setState(!t.canRedo()),this.mergeEl.setState(t.canUnmerge(),!t.selector.multiple()),this.autofilterEl.setState(!t.canAutofilter());const{font:i,format:s}=e;this.formatEl.setState(s),this.fontEl.setState(i.name),this.fontSizeEl.setState(i.size),this.boldEl.setState(i.bold),this.italicEl.setState(i.italic),this.underlineEl.setState(e.underline),this.strikeEl.setState(e.strike),this.textColorEl.setState(e.color),this.fillColorEl.setState(e.bgcolor),this.alignEl.setState(e.align),this.valignEl.setState(e.valign),this.textwrapEl.setState(e.textwrap),this.freezeEl.setState(t.freezeIsActive())}}});
//# sourceMappingURL=../../sourcemaps/component/toolbar/index.js.map
