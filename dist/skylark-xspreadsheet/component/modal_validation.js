/**
 * skylark-xspreadsheet - A version of xspreadsheet.js that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./modal","./form_input","./form_select","./form_field","./button","../locale/locale","./element","../config"],function(e,i,t,n,r,a,s,l){"use strict";return class extends e{constructor(){const e=new n(new t("cell",["cell"],"100%",e=>a.t(`dataValidation.modeType.${e}`)),{required:!0},`${a.t("dataValidation.range")}:`,100),h=new n(new i("120px","E3 or E3:F12"),{required:!0,pattern:/^([A-Z]{1,2}[1-9]\d*)(:[A-Z]{1,2}[1-9]\d*)?$/}),o=new n(new t("list",["list","number","date","phone","email"],"100%",e=>a.t(`dataValidation.type.${e}`),e=>this.criteriaSelected(e)),{required:!0},`${a.t("dataValidation.criteria")}:`,100),d=new n(new t("be",["be","nbe","eq","neq","lt","lte","gt","gte"],"160px",e=>a.t(`dataValidation.operator.${e}`),e=>this.criteriaOperatorSelected(e)),{required:!0}).hide(),f=new n(new i("70px","10"),{required:!0}).hide(),c=new n(new i("70px","100"),{required:!0,type:"number"}).hide(),v=new n(new i("120px","a,b,m_config"),{required:!0}),m=new n(new i("70px","10"),{required:!0,type:"number"}).hide();super(a.t("contextmenu.validation"),[s.h("div",`${l.cssPrefix}-form-fields`).children(e.el,h.el),s.h("div",`${l.cssPrefix}-form-fields`).children(o.el,d.el,f.el,c.el,m.el,v.el),s.h("div",`${l.cssPrefix}-buttons`).children(new r("cancel").on("click",()=>this.btnClick("cancel")),new r("remove").on("click",()=>this.btnClick("remove")),new r("save","primary").on("click",()=>this.btnClick("save")))]),this.mf=e,this.rf=h,this.cf=o,this.of=d,this.minvf=f,this.maxvf=c,this.vf=m,this.svf=v,this.change=(()=>{})}showVf(e){const i="date"===e?"2018-11-12":"10",{vf:t}=this;t.input.hint(i),t.show()}criteriaSelected(e){const{of:i,minvf:t,maxvf:n,vf:r,svf:a}=this;"date"===e||"number"===e?(i.show(),t.rule.type=e,n.rule.type=e,"date"===e?(t.hint("2018-11-12"),n.hint("2019-11-12")):(t.hint("10"),n.hint("100")),t.show(),n.show(),r.hide(),a.hide()):("list"===e?a.show():a.hide(),r.hide(),i.hide(),t.hide(),n.hide())}criteriaOperatorSelected(e){if(!e)return;const{minvf:i,maxvf:t,vf:n}=this;if("be"===e||"nbe"===e)i.show(),t.show(),n.hide();else{const e=this.cf.val();n.rule.type=e,"date"===e?n.hint("2018-11-12"):n.hint("10"),n.show(),i.hide(),t.hide()}}btnClick(e){if("cancel"===e)this.hide();else if("remove"===e)this.change("remove"),this.hide();else if("save"===e){const e=["mf","rf","cf","of","svf","vf","minvf","maxvf"];for(let i=0;i<e.length;i+=1){const t=this[e[i]];if(t.isShow()&&!t.validate())return}const i=this.mf.val(),t=this.rf.val(),n=this.cf.val(),r=this.of.val();let a=this.svf.val();"number"!==n&&"date"!==n||(a="be"===r||"nbe"===r?[this.minvf.val(),this.maxvf.val()]:this.vf.val()),this.change("save",i,t,{type:n,operator:r,required:!1,value:a}),this.hide()}}setValue(e){if(e){const{mf:i,rf:t,cf:n,of:r,svf:a,vf:s,minvf:l,maxvf:h}=this,{mode:o,ref:d,validator:f}=e,{type:c,operator:v,value:m}=f||{type:"list"};i.val(o||"cell"),t.val(d),n.val(c),r.val(v),Array.isArray(m)?(l.val(m[0]),h.val(m[1])):(a.val(m||""),s.val(m||"")),this.criteriaSelected(c),this.criteriaOperatorSelected(v)}this.show()}}});
//# sourceMappingURL=../sourcemaps/component/modal_validation.js.map
