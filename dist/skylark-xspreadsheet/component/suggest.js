/**
 * skylark-xspreadsheet - A version of xspreadsheet.js that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./element","./event","../config"],function(t,e,i){"use strict";function s(t){t.preventDefault();const{filterItems:e}=this;e.length<=0||(t.stopPropagation(),this.itemIndex<0&&(this.itemIndex=0),e[this.itemIndex].el.click(),this.hide())}return class{constructor(e,s,n="200px"){this.filterItems=[],this.items=e,this.el=t.h("div",`${i.cssPrefix}-suggest`).css("width",n).hide(),this.itemClick=s,this.itemIndex=-1}setOffset(t){this.el.cssRemoveKeys("top","bottom").offset(t)}hide(){const{el:t}=this;this.filterItems=[],this.itemIndex=-1,t.hide(),e.unbindClickoutside(this.el.parent())}setItems(t){this.items=t}search(s){let{items:n}=this;if(/^\s*$/.test(s)||(n=n.filter(t=>(t.key||t).startsWith(s.toUpperCase()))),n=n.map(e=>{let{title:s}=e;s?"function"==typeof s&&(s=s()):s=e;const n=t.h("div",`${i.cssPrefix}-item`).child(s).on("click.stop",()=>{this.itemClick(e),this.hide()});return e.label&&n.child(t.h("div","label").html(e.label)),n}),this.filterItems=n,n.length<=0)return;const{el:h}=this;h.html("").children(...n).show(),e.bindClickoutside(h.parent(),()=>{this.hide()})}bindInputEvents(t){t.on("keydown",t=>(function(t){const{keyCode:e}=t;switch(t.ctrlKey&&t.stopPropagation(),e){case 37:t.stopPropagation();break;case 38:(function(t){t.preventDefault(),t.stopPropagation();const{filterItems:e}=this;e.length<=0||(this.itemIndex>=0&&e[this.itemIndex].toggle(),this.itemIndex-=1,this.itemIndex<0&&(this.itemIndex=e.length-1),e[this.itemIndex].toggle())}).call(this,t);break;case 39:t.stopPropagation();break;case 40:(function(t){t.stopPropagation();const{filterItems:e}=this;e.length<=0||(this.itemIndex>=0&&e[this.itemIndex].toggle(),this.itemIndex+=1,this.itemIndex>e.length-1&&(this.itemIndex=0),e[this.itemIndex].toggle())}).call(this,t);break;case 13:case 9:s.call(this,t);break;default:t.stopPropagation()}}).call(this,t))}}});
//# sourceMappingURL=../sourcemaps/component/suggest.js.map
